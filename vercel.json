{
  "rewrites": [
    {
      "source": "/api/:path*",
      "destination": "https://dealstudio-backend.fly.dev/api/:path*"
    }
  ],
  "headers": [
    {
      "source": "/(.*)\\.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot)",
      "headers": [
        { "key": "Cache-Control", "value": "public, max-age=31536000, immutable" },
        { "key": "Expires", "value": "Tue, 31 Dec 2030 23:59:59 GMT" }
      ]
    }
  ],
  "redirects": [
    {
      "source": "/blinka",
      "destination": "/",
      "permanent": true
    },

    // Blog hub
    {
      "source": "/blog",
      "destination": "https://www.landbasedstrategies.com/insights/",
      "permanent": true
    },
    {
      "source": "/blog",
      "has": [
        { "type": "query", "key": "blog", "value": "y" }
      ],
      "destination": "https://www.landbasedstrategies.com/insights/",
      "permanent": true
    },
    {
      "source": "/blog/f/:path*",
      "destination": "https://www.landbasedstrategies.com/insights/",
      "permanent": true
    },

    // Old property detail pages → Track Record (pattern-based)
    {
      "source": "/:slug(398-swallow-st|10506-pavonia-dr|10506-pavonia-dr-1|307-lakeview-dr|0-kaupa-ct|0-johnson-dr|1094-lakeside|sold)",
      "destination": "https://www.landbasedstrategies.com/track-record/",
      "permanent": true
    },

    // Retired tool → Strategies hub
    {
      "source": "/lease-arbitrage-calc",
      "destination": "https://www.landbasedstrategies.com/strategies/",
      "permanent": true
    },

    // Force www as primary domain (keep this last)
    {
      "source": "/:path*",
      "has": [
        { "type": "host", "value": "landbasedstrategies.com" }
      ],
      "destination": "https://www.landbasedstrategies.com/:path*",
      "permanent": true
    }
  ]
}
